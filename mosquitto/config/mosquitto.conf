# =================================================================
# Persistence
# =================================================================
persistence true
persistence_location /mosquitto/data/

# =================================================================
# Logging
# =================================================================
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information

# =================================================================
# Listeners
# =================================================================

# Standard MQTT Protocol (Internal use or local testing)
port 1883
protocol mqtt

# MQTT over WebSockets (Used for Cloudflare Tunnel)
# Note: TLS is handled by Cloudflare Edge, so we use plain 'ws' here
listener 8083
protocol websockets

# =================================================================
# Security
# =================================================================

# Set to false to prevent unauthenticated access
allow_anonymous false

password_file /mosquitto/config/pwfile
